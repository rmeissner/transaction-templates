(this["webpackJsonptransaction-templates"]=this["webpackJsonptransaction-templates"]||[]).push([[0],{171:function(e,t,n){},173:function(e,t){},235:function(e,t){},253:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(22),i=n.n(c),s=(n(171),n(4)),o=n.n(s),u=n(59),l=n(74),p=n(157),d=n(295),f=n(293),b=n(294),j=n(296),h=n(287),v=n(155),O=n(291),x=n(153),m=n.n(x),g=n(290),w=n(292),k=n(48),y=n(286),S=function(e,t,n){if(e){if("time_now"===e)return(new Date).getMilliseconds()/1e3;var r=t[e];if(!r)throw Error("Invalid id "+e);switch(r.details.type){case"bn":return Object(k.e)(n[e],r.details.decimals);case"string":return n[e];case"json":try{return JSON.parse(n[e])}catch(a){return n[e]}case"fixed":return r.details.value}}},C=function e(t,n,r){return"string"===typeof t?S(t,n,r):t.map((function(t){return e(t,n,r)}))},F=function(e,t,n){if(e)return"string"===typeof e?S(e,t,n):new y.b(["function "+e.signature]).encodeFunctionData(e.signature,C(e.inputs,t,n))},T=function(e,t){return e.txs.map((function(n){return{description:n.description,to:S(n.to,e.inputs,t),value:S(n.value,e.inputs,t),data:F(n.data,e.inputs,t)}}))},E=n(154),I=n(84),N=n.n(I),A=function(e){var t,n;if(!e.to)throw Error("To is required for Safe transactions");return{to:e.to.toString(),value:(null===(t=e.value)||void 0===t?void 0:t.toString())||"0",data:(null===(n=e.data)||void 0===n?void 0:n.toString())||"0x"}},B=n(142),D=n.n(B),J=n(19),P=Object(h.a)((function(e){return{content:{padding:"16px"},input:{width:"100%"},templateInput:{verticalAlign:"center"}}})),M=function(){var e=P(),t=Object(r.useState)([]),n=Object(l.a)(t,2),c=n[0],i=n[1],s=Object(r.useState)({}),h=Object(l.a)(s,2),x=h[0],k=h[1],y=Object(I.useSafeAppsSDK)(),S=y.sdk,C=y.connected,F=Object(r.useState)(void 0),N=Object(l.a)(F,2),B=N[0],M=N[1],L=Object(r.useCallback)(function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:M(t),k({}),i([]);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[M,i,k]),q=Object(r.useCallback)(function(){var e=Object(u.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n=t.target.files[0],(r=new FileReader).onload=function(e){var t;(null===(t=e.target)||void 0===t?void 0:t.result)&&L(JSON.parse(e.target.result.toString()))},r.readAsBinaryString(n)}catch(t){console.error(t)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[L]),K=Object(r.useCallback)(function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&!(t.length<2)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,D.a.get(t);case 5:n=e.sent,L(n.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),[L]),R=Object(r.useCallback)(Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(B){e.next=2;break}return e.abrupt("return");case 2:try{t=T(B,x),i(t)}catch(n){console.error(n)}case 3:case"end":return e.stop()}}),e)}))),[x,B,i]),U=Object(r.useCallback)(function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!C){e.next=4;break}return S.txs.send({txs:[A(t)]}),e.abrupt("return");case 4:return e.next=6,window.ethereum.enable();case 6:new E.a.providers.Web3Provider(window.ethereum).getSigner().sendTransaction({to:t.to,value:t.value,data:t.data}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),[C,S]),W=Object(r.useCallback)(function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{S.txs.send({txs:t.map(A)})}catch(n){console.error(n)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[S]),_=Object(g.a)("(prefers-color-scheme: dark)"),z=a.a.useMemo((function(){return Object(v.a)({palette:{type:_?"dark":"light",primary:m.a}})}),[_]);return Object(J.jsxs)(O.a,{theme:z,children:[Object(J.jsx)(w.a,{}),Object(J.jsxs)("div",{className:e.content,children:[Object(J.jsxs)("h1",{children:["Transaction template: ",(null===B||void 0===B?void 0:B.name)||"Upload Template"]}),Object(J.jsxs)(d.a,{className:e.templateInput,children:[Object(J.jsx)(f.a,{type:"file",inputProps:{accept:".json"},onChange:q})," \xa0 or \xa0 ",Object(J.jsx)(b.a,{placeholder:"Enter template json url",onChange:function(e){K(e.target.value)}})]}),B&&Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)("h3",{children:"Inputs"}),Object.entries(B.inputs).map((function(t){var n=Object(l.a)(t,2),r=n[0],a=n[1];switch(a.details.type){case"bn":case"json":case"string":return Object(J.jsx)(b.a,{placeholder:a.details.hint,label:a.label,value:x[r]||"",onChange:function(e){k(function(e,t,n){var r=Object(p.a)({},e);return r[t]=n,r}(x,r,e.target.value))},className:e.input})}})),Object(J.jsx)(j.a,{color:"primary",onClick:R,children:"Build"}),Object(J.jsxs)("h3",{children:["Transactions ",C&&c.length>1&&Object(J.jsx)(j.a,{color:"primary",onClick:function(){return W(c)},children:"Execute All"})]}),c.map((function(e,t){return Object(J.jsxs)(J.Fragment,{children:[e.description||"Transaction #".concat(t+1),Object(J.jsx)(j.a,{color:"primary",onClick:function(){return U(e)},children:"Execute"}),Object(J.jsx)("br",{})]})}))]})]})]})},L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,298)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};i.a.render(Object(J.jsx)(a.a.StrictMode,{children:Object(J.jsx)(N.a,{children:Object(J.jsx)(M,{})})}),document.getElementById("root")),L()}},[[253,1,2]]]);
//# sourceMappingURL=main.a42898b2.chunk.js.map