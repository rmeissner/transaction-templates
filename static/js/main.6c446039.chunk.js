(this["webpackJsonptransaction-templates"]=this["webpackJsonptransaction-templates"]||[]).push([[0],{198:function(t,e,n){},200:function(t,e){},216:function(t,e){},291:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),c=n(25),u=n.n(c),s=(n(198),n(4)),i=n.n(s),o=n(34),l=n(90),p=n(182),d=n(336),b=n(334),f=n(335),x=n(337),j=n(329),v=n(180),h=n(332),m=n(179),O=n.n(m),w=n(331),k=n(333),g=n(59),y=n(324),S=void 0,C=function(){var t=Object(o.a)(i.a.mark((function t(e,n,r){var a,c,u,s,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",void 0);case 2:if("time_now"!==e){t.next=4;break}return t.abrupt("return",(new Date).getMilliseconds()/1e3);case 4:if(a=n[e]){t.next=7;break}throw Error("Invalid id "+e);case 7:t.t0=a.details.type,t.next="bn"===t.t0?10:"string"===t.t0?19:"json"===t.t0?20:"fixed"===t.t0?27:"contractCall"===t.t0?28:46;break;case 10:if("string"!==typeof a.details.decimals){t.next=16;break}return t.next=13,C(a.details.decimals,n,r);case 13:t.t1=t.sent,t.next=17;break;case 16:t.t1=a.details.decimals;case 17:return c=t.t1,t.abrupt("return",Object(g.e)(r[e],c));case 19:return t.abrupt("return",r[e]);case 20:return t.prev=20,t.abrupt("return",JSON.parse(r[e]));case 24:return t.prev=24,t.t2=t.catch(20),t.abrupt("return",r[e]);case 27:return t.abrupt("return",a.details.value);case 28:if(S){t.next=30;break}throw Error("Cannot query chain information");case 30:return u=new y.b(["function "+a.details.signature]),t.t3=u,t.t4=a.details.signature,t.next=35,F(a.details.inputs,n,r);case 35:return t.t5=t.sent,s=t.t3.encodeFunctionData.call(t.t3,t.t4,t.t5),t.next=39,C(a.details.target,n,r);case 39:return o=t.sent,t.t6=u,t.t7=a.details.signature,t.next=44,S.call({to:o,data:s});case 44:return t.t8=t.sent,t.abrupt("return",t.t6.decodeFunctionResult.call(t.t6,t.t7,t.t8)[0]);case 46:case"end":return t.stop()}}),t,null,[[20,24]])})));return function(e,n,r){return t.apply(this,arguments)}}(),F=function(){var t=Object(o.a)(i.a.mark((function t(e,n,r){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!==typeof e){t.next=6;break}return t.next=3,C(e,n,r);case 3:t.t0=t.sent,t.next=9;break;case 6:return t.next=8,Promise.all(e.map(function(){var t=Object(o.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F(e,n,r);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 8:t.t0=t.sent;case 9:return t.abrupt("return",t.t0);case 10:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),D=function(){var t=Object(o.a)(i.a.mark((function t(e,n,r){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",void 0);case 2:if("string"!==typeof e){t.next=6;break}return t.next=5,C(e,n,r);case 5:return t.abrupt("return",t.sent);case 6:return a=new y.b(["function "+e.signature]),t.t0=a,t.t1=e.signature,t.next=11,F(e.inputs,n,r);case 11:return t.t2=t.sent,t.abrupt("return",t.t0.encodeFunctionData.call(t.t0,t.t1,t.t2));case 13:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),T=function(){var t=Object(o.a)(i.a.mark((function t(e,n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(e.txs.map(function(){var t=Object(o.a)(i.a.mark((function t(r){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=r.description,t.next=3,C(r.to,e.inputs,n);case 3:return t.t1=t.sent,t.next=6,C(r.value,e.inputs,n);case 6:return t.t2=t.sent,t.next=9,D(r.data,e.inputs,n);case 9:return t.t3=t.sent,t.abrupt("return",{description:t.t0,to:t.t1,value:t.t2,data:t.t3});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),P=n(109),E=n(166),A=n(102),B=n.n(A),I=function(t){var e,n;if(!t.to)throw Error("To is required for Safe transactions");return{to:t.to.toString(),value:(null===(e=t.value)||void 0===e?void 0:e.toString())||"0",data:(null===(n=t.data)||void 0===n?void 0:n.toString())||"0x"}},N=n(169),J=n.n(N),M=n(58),q=new y.b(["function multiSend(bytes memory transactions) public"]),L=function(t){return"0x"+t.map((function(t){return function(t){var e=M.utils.arrayify(t.data);return M.utils.solidityPack(["uint8","address","uint256","uint256","bytes"],[0,t.to,t.value,e.length,e]).slice(2)}(t)})).join("")},R=function(t){return{to:"0x8D29bE29923b68abfDD21e541b9374737B49cdAD",data:q.encodeFunctionData("multiSend",[L(t)])}},W=n(22),G=Object(j.a)((function(t){return{content:{padding:"16px"},input:{width:"100%"},templateInput:{verticalAlign:"center"}}})),K=function(){var t=G(),e=Object(r.useState)([]),n=Object(l.a)(e,2),c=n[0],u=n[1],s=Object(r.useState)({}),j=Object(l.a)(s,2),m=j[0],g=j[1],y=Object(A.useSafeAppsSDK)(),C=y.safe,F=y.sdk,D=y.connected,B=Object(r.useState)(void 0),N=Object(l.a)(B,2),M=N[0],q=N[1],L=Object(r.useCallback)(function(){var t=Object(o.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:q(e),g({}),u([]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[q,u,g]),K=Object(r.useCallback)(function(){var t=Object(o.a)(i.a.mark((function t(e){var n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n=e.target.files[0],(r=new FileReader).onload=function(t){var e;(null===(e=t.target)||void 0===e?void 0:e.result)&&L(JSON.parse(t.target.result.toString()))},r.readAsBinaryString(n)}catch(e){console.error(e)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[L]),U=Object(r.useCallback)(function(){var t=Object(o.a)(i.a.mark((function t(e){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&!(e.length<2)){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,J.a.get(e);case 5:n=t.sent,L(n.data),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}(),[L]),X=Object(r.useCallback)(Object(o.a)(i.a.mark((function t(){var e,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(M){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,e=D?new E.SafeAppsSdkProvider(C,F):new P.a.providers.Web3Provider(window.ethereum),S=e,t.next=7,T(M,m);case 7:n=t.sent,u(n),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),console.error(t.t0);case 14:case"end":return t.stop()}}),t,null,[[2,11]])}))),[D,C,F,m,M,u]),_=Object(r.useCallback)(function(){var t=Object(o.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!D){t.next=4;break}return F.txs.send({txs:[I(e)]}),t.abrupt("return");case 4:return t.next=6,window.ethereum.enable();case 6:new P.a.providers.Web3Provider(window.ethereum).getSigner().sendTransaction({to:e.to,value:e.value,data:e.data}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}(),[D,F]),z=Object(r.useCallback)(function(){var t=Object(o.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{console.log(R(e.map(I))),window.alert("Generated TX has been logged to the console")}catch(n){console.error(n)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[F]),H=Object(r.useCallback)(function(){var t=Object(o.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{F.txs.send({txs:e.map(I)})}catch(n){console.error(n)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[F]),Q=Object(w.a)("(prefers-color-scheme: dark)"),V=a.a.useMemo((function(){return Object(v.a)({palette:{type:Q?"dark":"light",primary:O.a}})}),[Q]);return Object(W.jsxs)(h.a,{theme:V,children:[Object(W.jsx)(k.a,{}),Object(W.jsxs)("div",{className:t.content,children:[Object(W.jsxs)("h1",{children:["Transaction template: ",(null===M||void 0===M?void 0:M.name)||"Upload Template"]}),Object(W.jsxs)(d.a,{className:t.templateInput,children:[Object(W.jsx)(b.a,{type:"file",inputProps:{accept:".json"},onChange:K})," \xa0 or \xa0 ",Object(W.jsx)(f.a,{placeholder:"Enter template json url",onChange:function(t){U(t.target.value)}})]}),M&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("h3",{children:"Inputs"}),Object.entries(M.inputs).map((function(e){var n=Object(l.a)(e,2),r=n[0],a=n[1];switch(a.details.type){case"bn":case"json":case"string":return Object(W.jsx)(f.a,{placeholder:a.details.hint,label:a.label,value:m[r]||"",onChange:function(t){g(function(t,e,n){var r=Object(p.a)({},t);return r[e]=n,r}(m,r,t.target.value))},className:t.input})}})),Object(W.jsx)(x.a,{color:"primary",onClick:X,children:"Build"}),Object(W.jsxs)("h3",{children:["Transactions ",c.length>1&&Object(W.jsx)(x.a,{color:"primary",onClick:function(){return D?H(c):z(c)},children:D?"Execute All":"Build Tx"})]}),c.map((function(t,e){return Object(W.jsxs)(W.Fragment,{children:[t.description||"Transaction #".concat(e+1),Object(W.jsx)(x.a,{color:"primary",onClick:function(){return _(t)},children:"Execute"}),Object(W.jsx)("br",{})]})}))]})]})]})},U=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,339)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,c=e.getLCP,u=e.getTTFB;n(t),r(t),a(t),c(t),u(t)}))};u.a.render(Object(W.jsx)(a.a.StrictMode,{children:Object(W.jsx)(B.a,{children:Object(W.jsx)(K,{})})}),document.getElementById("root")),U()}},[[291,1,2]]]);
//# sourceMappingURL=main.6c446039.chunk.js.map